<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>luispe ‚Äì Idp</title><link>https://luispe.github.io/blog/es/tags/idp/</link><description>Recent content in Idp on luispe</description><generator>Hugo -- gohugo.io</generator><language>es</language><lastBuildDate>Sat, 01 Nov 2025 00:00:00 -0300</lastBuildDate><atom:link href="https://luispe.github.io/blog/es/tags/idp/index.xml" rel="self" type="application/rss+xml"/><item><title>Construir desde las diferencias</title><link>https://luispe.github.io/blog/es/posts/build-on-difference/</link><pubDate>Sat, 01 Nov 2025 00:00:00 -0300</pubDate><guid>https://luispe.github.io/blog/es/posts/build-on-difference/</guid><description>
&lt;p&gt;En esta publicaci√≥n voy intentar contar nuestra experiencia
construyendo el IDP en Akua, que retos sorteamos, estado actual
y lo que queda para el futuro del IDP.&lt;/p&gt;
&lt;p&gt;Con &lt;a href="https://www.linkedin.com/in/geryepes/"target="_blank" rel="noopener"&gt;Ger&lt;/a&gt; a esta altura me
animo a decir que un amigo, nos unimos desde los inicios de Akua
con el objetivo de constuir la plataforma de desarrollo interna,
ambos de experiencias e industrias diferentes pero con una
misma visi√≥n profunda sobre lo que necesitaba Akua.&lt;/p&gt;
&lt;p&gt;Deje enlace de su linkedin, pero a muy breve &amp;ndash;e irrespetuoso resumen&amp;ndash;
Ger viene con una experiencia desde el mas bajo nivel en infraestructura
hasta llegar a constuir el equipo y la plataforma en Sate (para los amigos),
&lt;a href="https://www.linkedin.com/company/satellogic/"target="_blank" rel="noopener"&gt;Satellogic&lt;/a&gt; si nos ponemos
mas serios.&lt;/p&gt;
&lt;p&gt;En mi caso arranque mi carrera como desarrollador de producto y ya desde
mi paso por Viacom (Telef√©) comenc√© a sentir una curiosidad muy fuerte
por la infraestructura, en Pomelo pude trabajar a tiempo completo ayudando
a construir el IDP y en Akua ya junto a &amp;ldquo;mi compa&amp;rdquo; lo dise√±amos y ejecutamos
desde cero con todo el orgullo que eso me provoca.&lt;/p&gt;
&lt;h2&gt;Primeros dias y primeros pasos&lt;span class="hx:absolute hx:-mt-20" id="primeros-dias-y-primeros-pasos"&gt;&lt;/span&gt;
&lt;a href="#primeros-dias-y-primeros-pasos" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Comenzamos con una hoja en blanco, literal, no hab√≠a absolutamente nada
en Akua, una cuenta de AWS pelada pero eso era lo que menos nos preocupaba;
dejo un punteo de &amp;ldquo;nuestros mantras&amp;rdquo; que hasta el dia de hoy seguimos
manteniendo y velando porque eso siga sucediendo:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;La operaci√≥n y mantenimiento de nuestra plataforma debe tender a cero.&lt;/li&gt;
&lt;li&gt;Lo que desarrollemos se tiene que poder probar y testear local sin que sea
un chino poder hacerlo.&lt;/li&gt;
&lt;li&gt;Si funciona en desarrollo tiene que funcionar en producci√≥n o en cualquier
ciclo de vida por el que pase el software.&lt;/li&gt;
&lt;li&gt;Todo debe autodescubirse, no &amp;ldquo;harcodiemos&amp;rdquo; nada.&lt;/li&gt;
&lt;li&gt;La simpleza ante todo.&lt;/li&gt;
&lt;li&gt;Rompamos con la inercia de experiencias previas.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Armando las bases&lt;span class="hx:absolute hx:-mt-20" id="armando-las-bases"&gt;&lt;/span&gt;
&lt;a href="#armando-las-bases" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Nos aliamos con Binbash para que ejecute nuestro dise√±o de redes
compliance con PCI, mientras Ger y yo hac√≠amos una validaci√≥n
de que herramienta se iba a adaptar mejor para la gesti√≥n de la
infraestructura de nuestro IDP, para ser absolutamente transparentes
evaluamos tres, desde el inicio descartamos una y con las dos restantes
hicimos unas pruebas rapidas de concepto para determinar con cual nos
√≠bamos a quedar.&lt;/p&gt;
&lt;p&gt;Las tres herramientas analizadas:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Terraform CDK&lt;/strong&gt;, de las tres analizadas la descartamos desde el d√≠a cero,
porqu√©?, terraform venia con una direcci√≥n no open source y sumado a eso
vimos (al menos en ese momento) que al proyecto de Terraform CDK
le faltaba una enorme documentaci√≥n, algo que a Ger y a m√≠ nos
mata por nuetra forma de trabajo.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Crossplane&lt;/strong&gt;, puede ser tentador utilizar esta herramienta, pero en la
primera de cambio que tengas que agregar algo de l√≥gica en un producto que
provea tu plataforma estas un poco sonado, y seamos honestos, YAML es demasiado
fr√°gil para delegarle la responsabilidad de gestionar los productos que
ofrezca nuestro IDP.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Pulumi&lt;/strong&gt;, ya te habr√°s dado cuenta, elegimos Pulumi, nos daba flexibilidad
para poder desarrollar cualquier l√≥gica que queramos, nos abstra√≠a de la
complejidad de manejar el estado de los recursos, su documentaci√≥n es un lujazo
y tiene una fuerte adopci√≥n en la comunidad; lo que nos proyectaba que en caso
futuro si sumamos a mas compas al equipo no se van a encontrar con algo totalmente
desconocido; por √∫ltimo y no menor te ofrece la posibiliad de implementar
dynamic resources osea si hay algun recurso que no este disponible en Pulumi
uno puede implementar la interfaz de Pulumi y gestionar recursos no soportados
por el IaC, en nuestro caso si no recuerdo mal tuvimos que hacerlo en
dos oportunidades con Typensense y &amp;ldquo;marcas de deployment&amp;rdquo; en NewRelic.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Quiero hacer una aclaraci√≥n, ni Ger ni yo hab√≠amos usado de forma productiva a
Pulumi, conoc√≠amos y hab√≠amos testeado la herramienta, pero no hab√≠amos tenido
oportunidad de usarla de forma productiva.&lt;/p&gt;
&lt;p&gt;Una vez que elegimos nuestra herramienta de backend pasamos a la siguiente
fase de definici√≥n de nuetro IDP, la capa de presentaci√≥n.&lt;/p&gt;
&lt;p&gt;Como dice el t√≠tulo ac√° pudimos debatir desde las diferencias que √≠bamos a
ofrecer, Ger desde su experiencia con equipos extremandamente t√©cnicos y que
tienen una necesidad de control de absolutamente todo propon√≠a ofrecer las
abstracciones de los productos de plataforma y que nuestros desarrolladores
usen en sus proyectos dicha abstracci√≥n &amp;ndash;aka iban a tener que saber manejar pulumi&amp;ndash;;
en contraparte mi l√≠nea de pensamiento y propuesta era que los
desarrolladores de Akua no √≠ban a sentirse c√≥modos teniendo que
saber manejar una herramienta de plataforma, deb√≠amos ofrecer una capa
de presentacion &amp;ndash;aka portal&amp;ndash; y que desde ah√≠ puedan dise√±ar la
arquitectura del proyecto y posterior despliegue y gesti√≥n.&lt;/p&gt;
&lt;p&gt;Ac√° al igual que nuestra herramienta de backend hoy en d√≠a aparecen
varias posibilidades, analizamos dos, Backstage y Port.io,
hay mas claro, pero como siempre buscamos las de mayor adopci√≥n en la
industria para que el d√≠a de ma√±ana quien ingrese al equipo no se encuentre
con algo que no se usa en ning√∫n lado.&lt;/p&gt;
&lt;p&gt;En este caso nos decidimos por Port.io, porqu√©? Backstage nos obligaba a
tener que desarrollar cosas arriba y en el momento en el que
estabamos no quer√≠amos tocar nada de frontend, no es nuestro fuerte y nos
oblibaga a tener un desvio de tiempos importante que no eran una opci√≥n.&lt;/p&gt;
&lt;p&gt;En el caso de Port.io no fue por descarte, me gusta hablar de Port como
el Notion de las plataformas, su sistema de Bluperints te permite dise√±ar
tu plataforma a lo que necesitas y no te obliga a adaptarte a sus decisiones,
la UI es exquisita, brinda acceso por SSO, tiene sistema de RBAC (aun bastante mejorable)
y sumado a Scorecards, Self Service actions, Automations y generaci√≥n de dashboard
con un par de clicks se convirti√≥ en nuestra herramienta perfecta para la capa
de presentaci√≥n de nuestra Plataforma que estabamos buscando.&lt;/p&gt;
&lt;h3&gt;Stack tecnol√≥gico&lt;span class="hx:absolute hx:-mt-20" id="stack-tecnol√≥gico"&gt;&lt;/span&gt;
&lt;a href="#stack-tecnol%c3%b3gico" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;Desarrollamos un Helm chart a medida para nuestras aplicaciones, con el tiempo
evolucion√≥ y hoy soporta poder desplegar tanto un microservicio o un monorepo con esto
√∫ltimo nos queremos referir a que con un mismo proyecto se puedan desplegar m√∫ltiples
servicios en kubernetes sin necesidad de tener &amp;ldquo;n&amp;rdquo; proyectos en Gitlab.&lt;/p&gt;
&lt;p&gt;Nuestro helm chart (tambi√©n pensado desde el d√≠a cero) esta centralizado y
evoluciona como cualquier software con semver, y nuestros desarrolladores
de producto tienen la libertad de usar x o y version si necesitan
de dicha funcionalidad.&lt;/p&gt;
&lt;p&gt;Ac√° una vez mas nuestro enfoque fue, centralicemos la herramienta y la evoluci√≥n,
intentando no transferir carga cognitiva a nuestros clientes; asi que en este punto
nuestro helm-chart evoluciona y cada proyecto definie sus values.yaml que en tiempo
de despliegue se utilizan para el despliegue de la(s) aplicaci√≥n(es).&lt;/p&gt;
&lt;p&gt;Para nuestra gesti√≥n de ciclo de vida de las aplicaciones usamos gitlab, Ger en este caso
tiene enorme experiencia y nos sirvio un mont√≥n para tener runners privados que ejecutan la
sincronizaci√≥n de los recursos de la aplicaci√≥n sin necesidad de tener credenciales de
acceso a AWS distribuidas en Gitlab, con todo el peligro que ello conlleva.&lt;/p&gt;
&lt;p&gt;Hablando de Gitlab, tambi√©n por experiencias previas, sabemos que realizar cambios
en los pipelines y que todos los proyectos los adopten es un desaf√≠o, por eso fuimos
por un esquema de pipelines centralizados y que los proyectos solo hagn el &amp;ldquo;include&amp;rdquo;
y no se preocupen de nada mas, en caso de necesitar algo se agrega al pipeline centralizado
y ya todos los proyectos lo tienen disponible, como siempre semver para poder evolucionar
sin comprometer el desarrollo de nuestros clientes.&lt;/p&gt;
&lt;p&gt;Creo que ya lo coment√© pero para la orquestaci√≥n y carga de trabajo de nuestras
aplicaciones usamos kubernetes, en este caso con una particularidad, lo usamos
con fargate, propuesta del Ger y por suerte adoptada y pudimos convencer a las
personas necesarias para ir por este camino.&lt;/p&gt;
&lt;p&gt;Que ventaja nos da usar fargate? operaci√≥n de kubernetes casi nula, actualizar la
version de kubernetes es trivial, es PCI compliance, entre otros befenicios.&lt;/p&gt;
&lt;p&gt;Tiene sus contras como todo, no se pueden instalar herramienteas en kubernetes
que necesitan desplegar un daemonset, igual mucho no nos preocupa eso porque
(volviendo a uno de nuestros mantras de mantener todo lo mas simple posible),
nuestro cluster de EKS tiene muy muy pocas herramientas o componentes instalados:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kong&lt;/li&gt;
&lt;li&gt;Metrics server&lt;/li&gt;
&lt;li&gt;External DNS&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Y si, tienen que haber una justificaci√≥n y ganancia muy alta para instalar
mas herramientas en nuestros clusters.&lt;/p&gt;
&lt;h4&gt;Un momento y los secretos?&lt;span class="hx:absolute hx:-mt-20" id="un-momento-y-los-secretos"&gt;&lt;/span&gt;
&lt;a href="#un-momento-y-los-secretos" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Desarrollamos un flujo de trabajo con parameter store que nos permite desplegear
y disponibilizar los secretos a las aplicaciones en kuberentes con la flexibilidad
de que si algun secreto no es manejado por nuestra infra-lib el equipo de seguridad
lo pueda agregar a parameter store y nuestra infra-lib lo deja disponible en la app.&lt;/p&gt;
&lt;h4&gt;Seguridad auth y authz?&lt;span class="hx:absolute hx:-mt-20" id="seguridad-auth-y-authz"&gt;&lt;/span&gt;
&lt;a href="#seguridad-auth-y-authz" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h4&gt;&lt;p&gt;Desde el minuto cero para las aplicaciones usamos IRSA (Iam Role for Service Account)
y desplegamos permisos por tag (en breve comento nuestra estrategia de tagging),
y en caso de que el recurso de AWS no lo soporte (s3), nuestra infra-lib tiene
la habilidad de autodescubrir el recurso y asignar los permisos necesarios.&lt;/p&gt;
&lt;p&gt;Acabo de hablar de tag y recuerdo que en alguna publicaci√≥n que hicimos
alguien nos critic√≥ que una plataforma sin finops no puede considerearse como tal,
aprovecho a contestarle que desde el minuto cero todos nuestros recursos de infraestructura
cuentan con tags centralizados manejados por nuestra infra-lib, esto nos va a permitir a
futuro cuando desarrollemos e implementemos el concepto de billing para nuestro IDP
sea todo mas facil al tener nuestro recursos correctamente &amp;ldquo;taggeados&amp;rdquo; y le dejo una
breve PD: el gasto de nuestra infraestructura es bastante mas bajo del que hab√≠amos
predicho gracias a las correctas configuraciones por entorno que hace nuestra infra-lib
en los recursos de infraestructura.&lt;/p&gt;
&lt;p&gt;Siguiendo con la tem√°tica de seguridad, el acceso a los recursos como base de datos
es mediante reglas en los security groups de la app y la DB, asi mismo el acceso
entre aplicaciones est√° bloqueado a nivel del red aunque esten el mismo namespace,
esto nos permite establecer reglas de acceso entre servicios que son manejadas por
Kong y se configuran de forma f√°cil desde nuestro portal Port.io.&lt;/p&gt;
&lt;h2&gt;Conclusiones&lt;span class="hx:absolute hx:-mt-20" id="conclusiones"&gt;&lt;/span&gt;
&lt;a href="#conclusiones" class="subheading-anchor" aria-label="Permalink for this section"&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Resta a√∫n comentar un monton de cosas mas: como implementamos scorecards,
acciones del dia 2, despliegue de single tenants, publicaci√≥n de rutas p√∫blicas;
entre otros, pero lo guardo para otra publicaci√≥n :).&lt;/p&gt;
&lt;p&gt;Pero para ir finalizando quiero reflexionar sobre algunos asuntos.&lt;/p&gt;
&lt;p&gt;Para comenzar como coment√© no en todos los casos estuvimos de
acuerdo con las propuestas tra√≠das por uno u otro, pero
supimos construir una plataforma de desarrollo interna desde
nuestras diferencias pero respetando siempre las opiniones
de cada uno; constuirmos un flujo de trabajo que nos llev√≥ a
desarrollar soluciones s√≥lidas con proyecci√≥n para varios a√±os y
esto siendo sinceros todas fueron ideas de Ger? o fueron ideas m√≠as?
poco importa sinceramente, como les contaba constuimos un flujo de
laburo donde dise√±amos y evaluamos multiples aleternativas y casu√≠sticas
para luego implementar; al final del camino es realmente un trabajo
en equipo donde lo que prevalece es nuestra plataforma y por sobre
todo las personas que lo integran.&lt;/p&gt;
&lt;p&gt;Ger querido, agradezco enormemente tu gratitud y apertura para
ense√±arme una enorme cantidad de cosas, espero haberte dejado
marcas de las m√≠as; es un orgullo y enorme placer haber construido
juntos esta plataforma y lo mas importante la amistad que
construimos y eso es para toda la vida ‚ù§Ô∏è!&lt;/p&gt;
&lt;p&gt;Hasta la pr√≥xima üëãüèΩ&lt;/p&gt;</description></item></channel></rss>